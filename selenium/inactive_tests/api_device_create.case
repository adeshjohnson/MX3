<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://192.168.0.93" />
<title>api_device_create</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">api_device_create</td></tr>
</thead><tbody>
<!--Login as administrator-->
<tr>
	<td>open</td>
	<td>/billing/callc/logout</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>login_username</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>login_psw</td>
	<td>admin1</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<!--Enable MOR API-->
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>allow_api</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>allow_get_api</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>api_secret_key</td>
	<td>secret</td>
</tr>
<tr>
	<td>check</td>
	<td>xml_api_extension</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<!--Calculate hash and send device_create command with incorrect hash-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c644000</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Incorrect hash</td>
	<td></td>
</tr>
<!--Send device_create command with correct hash.  invalid device group was specified, because theres still no shuch group. device shouldnt be created-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Try to create device with  invalid device group. device shouldnt be created-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=invalidine</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=invalidine&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Try to create device for user Test User #1 and specify gevice_group that is reseller's-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription1&amp;pin=12345&amp;devicegroup_id=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription1&amp;pin=234&amp;devicegroup_id=asdafs&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Do not specify any device group when creating device for user Test User #1. Device can be reated without group.-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription1&amp;pin=3</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription1&amp;pin=3&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/8</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>3</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_sip</td>
	<td>on</td>
</tr>
<!--Try to create device for user Reseller and specify device_group that is reseller's, but dont specify type. it should default to SIP-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=3&amp;description=desription9&amp;pin=1&amp;devicegroup_id=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>7f544a3f166563efce4dc5da5425cdd0d7a41634</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=3&amp;description=desription9&amp;pin=1&amp;devicegroup_id=1&amp;test=1&amp;hash=7f544a3f166563efce4dc5da5425cdd0d7a41634</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/9</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription9</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test Reseller</td>
	<td>Test Reseller</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>primary</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_sip</td>
	<td>on</td>
</tr>
<!--Create new IAX2 device for User Test #1. were not sending device group, but device must be created without device group-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription2&amp;type=IAX2&amp;pin=33333333</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;description=desription2&amp;type=IAX2&amp;pin=33333333&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/10</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription2</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>33333333</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_iax2</td>
	<td>on</td>
</tr>
<!--Create device group for user Test Reseller-->
<tr>
	<td>open</td>
	<td>/billing/users/device_group_new/2</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device Group created</td>
	<td></td>
</tr>
<!--As admin create new SIP device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=SIP&amp;description=desription1&amp;pin=12333&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=SIP&amp;description=desription1&amp;pin=12333&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/11</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>12333</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_sip</td>
	<td>on</td>
</tr>
<!--As admin create new H323 device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=H323&amp;description=desription1&amp;pin=12355&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=H323&amp;description=desription1&amp;pin=12355&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/12</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>12355</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>H323</td>
	<td></td>
</tr>
<!--As admin create new FAX device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=FAX&amp;description=desription1&amp;pin=12366&amp;devicegroup_id=asdafs</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=FAX&amp;description=desription1&amp;pin=12366&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/13</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>12366</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_fax</td>
	<td>on</td>
</tr>
<!--As admin create new ZAP device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=ZAP&amp;description=desription14&amp;pin=12367&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=ZAP&amp;description=desription14&amp;pin=12367&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/14</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription14</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>12367</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_zap</td>
	<td>on</td>
</tr>
<!--As admin create new virtual device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Virtual&amp;description=desription15&amp;pin=12377&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Virtual&amp;description=desription15&amp;pin=12377&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/15</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription15</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>12377</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_virtual</td>
	<td>on</td>
</tr>
<!--As admin try to create new invalid SIPIAX2 device  for user User Test #1, we should gracefully fail.-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=SIPIAX2&amp;description=desription1&amp;pin=13888&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=SIPIAX2&amp;description=desription1&amp;pin=13888&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device type invalid</td>
	<td></td>
</tr>
<!--As admin create new virtual device  for user User Test #1, with invalid group_id. we should gracefully fail-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Virtual&amp;description=desription1&amp;pin=22377&amp;devicegroup_id=asdafs</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Virtual&amp;description=desription1&amp;pin=22377&amp;devicegroup_id=24&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--As admin create new pinless H323 device  for user User Test #1-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=H323&amp;description=desriptionpinless&amp;pin= &amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=H323&amp;description=descriptionpinless1&amp;devicegroup_id=4&amp;pin= &amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/16</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>descriptionpinless1</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>H323</td>
	<td></td>
</tr>
<!--As admin create IAX2 device with random generated pin -->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=IAX2&amp;description=randompin&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=IAX2&amp;description=randompin&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/17</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>randompin</td>
</tr>
<!--<tr>
	<td>verifyValue</td>
	<td>id=device_pin</td>
	<td>[0-9]+</td>
</tr>-->
<tr>
	<td>verifyText</td>
	<td>link=Test User #1</td>
	<td>Test User #1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>name=device[devicegroup_id]</td>
	<td>Please change</td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>IAX2</td>
	<td></td>
</tr>
<!--Device cannot be created, because pin is all ready in use-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Fax&amp;description=desription15&amp;pin=12377&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Fax&amp;description=desription15&amp;pin=12377&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>PIN is already used</td>
	<td></td>
</tr>
<!--Device cannot be created, because pin is all ready in use-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Fax&amp;description=desription15&amp;pin=asd44&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=2&amp;type=Fax&amp;description=desription15&amp;pin=asd44&amp;devicegroup_id=4&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c6448df4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>PIN must be numeric</td>
	<td></td>
</tr>
<!--Device cannot be created, because admin pass is incorrect-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=admin&amp;p=admin1&amp;user_id=67&amp;type=Fax&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>592dcda8184fbd41afb0507bddd9fb962ab9f5b0</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=admin&amp;p=admin1&amp;user_id=67&amp;type=Fax&amp;devicegroup_id=4&amp;test=1&amp;hash=592dcda8184fbd41afb0507bddd9fb962ab9f5b0</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>User was not found</td>
	<td></td>
</tr>
<!--Device cannot be created, becausethere is no such user hacker-->
<tr>
	<td>open</td>
	<td>/billing/test/test_api?u=hacker&amp;p=admin1&amp;user_id=67&amp;type=Fax&amp;devicegroup_id=4</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>592dcda8184fbd41afb0507bddd9fb962ab9f5b0</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=hacker&amp;p=admin1&amp;user_id=67&amp;type=Fax&amp;devicegroup_id=4&amp;test=1&amp;hash=592dcda8184fbd41afb0507bddd9fb962ab9f5b0</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Bad login</td>
	<td></td>
</tr>
<!--Login as reseller-->
<tr>
	<td>open</td>
	<td>/billing/callc/logout</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>login_username</td>
	<td>reseller</td>
</tr>
<tr>
	<td>type</td>
	<td>login_psw</td>
	<td>reseller1</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<!--MOR API is already enabled-->
<!--Calculate hash and send device_create command with incorrect hash-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=2&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5&amp;test=1&amp;hash=38282ca5e65e63746498ef5b39a2fe71c644000</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Incorrect hash</td>
	<td></td>
</tr>
<!--Send device_create command with correct hash.  invalid device group was specified, because theres still no shuch group. device shouldnt be created-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=5&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Try to create device with  invalid device group. device shouldnt be created-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;description=kkkkkkk&amp;type=SIP&amp;pin=254585654&amp;devicegroup_id=invalidine&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Try to create device for reseller's user and specify gevice_group that is Test User's-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;description=desription1&amp;pin=12345&amp;devicegroup_id=4&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device group invalid</td>
	<td></td>
</tr>
<!--Do not specify any device group when creating device for reseller's user. Device can be created without group.-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;description=desription1&amp;pin=9&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/18</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//tr[4]/td[2]</td>
	<td>9</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=User Resellers</td>
	<td>User Resellers</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_sip</td>
	<td>on</td>
</tr>
<!--Create new IAX2 device for reseller's user. were not sending device group, but device must be created without device group-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;description=desription2&amp;type=IAX2&amp;pin=33333343&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/19</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription2</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//tr[3]/td[2]</td>
	<td>33333343</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=User Resellers</td>
	<td>User Resellers</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_iax2</td>
	<td>on</td>
</tr>
<!--As reseller create new SIP device  for user reseller's user, without group or with users device group-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;type=SIP&amp;description=desription1&amp;pin=42333&amp;devicegroup_id=3&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/20</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>42333</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=User Resellers</td>
	<td>User Resellers</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_sip</td>
	<td>on</td>
</tr>
<!--As reseller cannot create new ZAP-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;type=ZAP&amp;description=desription14&amp;pin=1236111&amp;devicegroup_id=3&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Device type invalid</td>
	<td></td>
</tr>
<!--As reseller create new Virtual device  for user reseller's user, but fail cause reseler doesnt have permissions-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;type=Virtual&amp;description=desription45&amp;pin=2346333&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>FAILED</td>
	<td></td>
</tr>
<!--login as admin and give privilegdes to create virtual devices-->
<tr>
	<td>open</td>
	<td>/billing/callc/logout</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=login_username</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>id=login_psw</td>
	<td>admin1</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/resellers/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=resellers_allow_use_virtual_device</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=commit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Settings saved</td>
	<td></td>
</tr>
<!--Login as reseller-->
<tr>
	<td>open</td>
	<td>/billing/callc/logout</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>login_username</td>
	<td>reseller</td>
</tr>
<tr>
	<td>type</td>
	<td>login_psw</td>
	<td>reseller1</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<!--As reseller create new SIP device  for user reseller's user, without group or with users device group-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=reseller&amp;p=reseller1&amp;user_id=5&amp;type=Virtual&amp;description=desription1&amp;pin=4233355&amp;devicegroup_id=3&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Device created</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/devices/device_edit/21</td>
	<td></td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device_description</td>
	<td>desription1</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>4233355</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>link=User Resellers</td>
	<td>User Resellers</td>
</tr>
<tr>
	<td>verifyValue</td>
	<td>id=device[device_type]_virtual</td>
	<td>on</td>
</tr>
<!--Neither user neither accountant should have permissions to create device-->
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=user_reseller&amp;p=user_reseller1&amp;user_id=5&amp;type=SIP&amp;description=desription1&amp;pin=42000&amp;test=1&amp;hash=d303ad2eaef52ff1993350cf96ca3fecbadf78ce</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>User was not found</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/api/device_create?u=accountant&amp;p=accountant1&amp;user_id=4&amp;description=desription1&amp;pin=4211113&amp;test=1&amp;hash=9a9d292176f7b8adb10d0d037732446bae1ef4dd</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>User was not found</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
