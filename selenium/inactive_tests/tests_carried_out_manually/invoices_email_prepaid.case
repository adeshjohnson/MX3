<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://192.168.0.163" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>

<!--Jei luzta, tai del to kad kartasi neuzkrauna normaliai /billing/accounting/invoices ir neranda Test User #1-->
<tr>
	<td>open</td>
	<td>/billing/callc/logout</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>login_username</td>
	<td>admin</td>
</tr>
<tr>
	<td>type</td>
	<td>login_psw</td>
	<td>admin</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Succesfully logged in</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/users/edit/2</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>user_postpaid_2</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//div[@id='confirm_without_message']/input</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>User's settings succesfully changed: Test User #1</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_4']/span</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>email_sending_enabled</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_batch_size</td>
	<td>1</td>
</tr>
<tr>
	<td>type</td>
	<td>email_from</td>
	<td>aaaaaa</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Settings saved</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/users/edit/2</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>address_email</td>
	<td>aaaaaaaaaaaaa@gmtgfnvbail.com</td>
</tr>
<tr>
	<td>check</td>
	<td>i1</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i2</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i4</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i3</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i5</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i7</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>i6</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@name='commit' and @value='Change' and @type='submit' and @onclick=&quot;if (window.hiddenCommit) { window.hiddenCommit.setAttribute('value', this.value); }else { hiddenCommit = this.cloneNode(false);hiddenCommit.setAttribute('type', 'hidden');this.form.appendChild(hiddenCommit); }this.setAttribute('originalValue', this.value);this.disabled = true;this.value='Processing..';result = (this.form.onsubmit ? (this.form.onsubmit() ? this.form.submit() : false) : this.form.submit());if (result == false) { this.value = this.getAttribute('originalValue');this.disabled = false; }return result;&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/test/load_delta_sql/tests/invoices/subscriptions_for_invoices</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/test/load_delta_sql/tests/invoices/calls_for_invoices</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_2']/span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView2_1']/span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>prepaid_invoice_number_type_2</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>prepaid_invoice_page_limit</td>
	<td>1</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Settings saved</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoices</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>date_from_year</td>
	<td>label=2010</td>
</tr>
<tr>
	<td>select</td>
	<td>date_from_month</td>
	<td>label=July</td>
</tr>
<tr>
	<td>select</td>
	<td>date_from_day</td>
	<td>label=1</td>
</tr>
<tr>
	<td>select</td>
	<td>date_till_year</td>
	<td>label=2012</td>
</tr>
<tr>
	<td>select</td>
	<td>date_till_month</td>
	<td>label=January</td>
</tr>
<tr>
	<td>select</td>
	<td>date_till_day</td>
	<td>label=1</td>
</tr>
<tr>
	<td>click</td>
	<td>invoice_type_prepaid</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure?</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//td[4]/div</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/invoices</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Test User #1</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>inv_full_price_1</td>
	<td>7883.8710</td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[1]</td>
	<td>label=2010-07-01</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[2]</td>
	<td>label=2012-01-01</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[4]</td>
	<td>label=not sent</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[6]</td>
	<td>label=yes</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[7]</td>
	<td>label=Prepaid</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Invoices sent: 1</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>verifySelectedLabel</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[4]</td>
	<td>not sent</td>
</tr>
<tr>
	<td>verifySelectedLabel</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[6]</td>
	<td>yes</td>
</tr>
<tr>
	<td>click</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<!--Invoices not sent: 1-->
<tr>
	<td>waitForTextPresent</td>
	<td>No Invoices found in selected period</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[4]</td>
	<td>label=sent</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[7]</td>
	<td>label=Prepaid</td>
</tr>
<tr>
	<td>click</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Invoices sent: 1</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_pdf/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Test_preriodic_service_memo invdet_type: &quot;1&quot; price: &quot;180.322580645161&quot; invoice_id: &quot;1&quot; quantity: &quot;1&quot; id: &quot;17&quot; - !ruby/object:Invoicedetail attributes: name: Test_periodic_service -</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_detailed_pdf/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Ok --- - dg_type: FIX prefix: &quot;1231&quot; dg_name: United States price: &quot;130&quot; selfcost: &quot;26&quot; billsec: &quot;1300&quot; dgid: &quot;9263&quot; user_rate: &quot;0&quot; calls: &quot;26&quot; Prepaid_ Invoice_detailed-Test</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_by_cid_pdf/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementPresent</td>
	<td>//body</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_csv/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>user_id,period_start,period_end,issue_date,price (USD),price_with_tax (USD)</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_detailed_csv/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Test_preriodic_service_memo,1.0000,180.3226 Test_periodic_service - Test_preriodic_service_memo,1.0000,180.3226 Test_periodic_service - Test_preriodic_service_memo,1.0000,180.3226</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_by_cid_csv/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>CallerID,price(USD),calls, 101,130.0,26</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/generate_invoice_destinations_csv/1?&amp;test=1</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Test_preriodic_service_memo,1,180.3226 Test_periodic_service - Test_preriodic_service_memo,1,180.3226 Test_periodic_service - Test_preriodic_service_memo,1,180.3226 Test_periodic_service -</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/stats/action_log</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>target_10</td>
	<td>Invoice (1)</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>target_9</td>
	<td>Invoice (1)</td>
</tr>
<tr>
	<td>verifyText</td>
	<td>target_8</td>
	<td>Invoice (1)</td>
</tr>
<!--insert sql-->
<tr>
	<td>open</td>
	<td>/billing/test/load_delta_sql/tests/invoices/bad_email</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>email_sending_enabled</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_from</td>
	<td>As</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>email_test_link</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/invoices</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[1]</td>
	<td>label=2010-07-01</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[2]</td>
	<td>label=2012-01-01</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<!--insert sql-->
<tr>
	<td>open</td>
	<td>/billing/test/load_delta_sql/tests/invoices/another_bad_email</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>email_test_link</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<!--some mistakes-->
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_4']/span</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_smtp_server</td>
	<td>aesrjsy</td>
</tr>
<tr>
	<td>type</td>
	<td>email_port</td>
	<td>34565473</td>
</tr>
<tr>
	<td>type</td>
	<td>email_login</td>
	<td>dgngt</td>
</tr>
<tr>
	<td>type</td>
	<td>email_password</td>
	<td>dgm,jshngbdf</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Email password can contain only letters and digits</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_password</td>
	<td>wertyuikkjhgfdsa</td>
</tr>
<tr>
	<td>type</td>
	<td>email_batch_size</td>
	<td>876543</td>
</tr>
<tr>
	<td>type</td>
	<td>email_from</td>
	<td>As23456789</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>email_test_link</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_4']/span</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_smtp_server</td>
	<td>as@gt.case</td>
</tr>
<tr>
	<td>type</td>
	<td>email_port</td>
	<td>adfsgnehty</td>
</tr>
<tr>
	<td>type</td>
	<td>email_login</td>
	<td>34563</td>
</tr>
<tr>
	<td>type</td>
	<td>email_password</td>
	<td>435646</td>
</tr>
<tr>
	<td>type</td>
	<td>email_batch_size</td>
	<td>sdfhtrrr</td>
</tr>
<tr>
	<td>type</td>
	<td>email_from</td>
	<td>#@$%^&amp;*(</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>email_test_link</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/invoices</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[1]</td>
	<td>label=2010-07-01</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[2]</td>
	<td>label=2012-01-01</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Start page</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Configuration error. Please consult this help link.</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/functions/settings</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_4']/span</td>
	<td></td>
</tr>
<tr>
	<td>check</td>
	<td>email_sending_enabled</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>email_smtp_server</td>
	<td>smtp.gmail.com</td>
</tr>
<tr>
	<td>type</td>
	<td>email_port</td>
	<td>25</td>
</tr>
<tr>
	<td>type</td>
	<td>email_login</td>
	<td>kolmitest998</td>
</tr>
<tr>
	<td>type</td>
	<td>email_password</td>
	<td>kolmisoft9</td>
</tr>
<tr>
	<td>type</td>
	<td>email_batch_size</td>
	<td>2</td>
</tr>
<tr>
	<td>type</td>
	<td>email_from</td>
	<td>aaaaaa</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Settings saved</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView1_2']/span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[@id='tabTabdhtmlgoodies_tabView2_1']/span</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>prepaid_invoice_page_limit</td>
	<td>2</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>commit</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Settings saved</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/users/edit/2</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>address_email</td>
	<td>aaaaaaaa@gtrhfgbail.com</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@name='commit' and @value='Change' and @type='submit' and @onclick=&quot;if (window.hiddenCommit) { window.hiddenCommit.setAttribute('value', this.value); }else { hiddenCommit = this.cloneNode(false);hiddenCommit.setAttribute('type', 'hidden');this.form.appendChild(hiddenCommit); }this.setAttribute('originalValue', this.value);this.disabled = true;this.value='Processing..';result = (this.form.onsubmit ? (this.form.onsubmit() ? this.form.submit() : false) : this.form.submit());if (result == false) { this.value = this.getAttribute('originalValue');this.disabled = false; }return result;&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/billing/accounting/invoices</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link_send_invoices</td>
	<td></td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[4]</td>
	<td>label=sent</td>
</tr>
<tr>
	<td>select</td>
	<td>//div[@id='invoices_details']/table/tbody/tr/td/select[7]</td>
	<td>label=Prepaid</td>
</tr>
<tr>
	<td>click</td>
	<td>//input[@name='commit' and @value='Send Invoices over Email to Users']</td>
	<td></td>
</tr>
<tr>
	<td>assertConfirmation</td>
	<td>Are you sure you want to send invoices by email?</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Invoices sent: 1</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>